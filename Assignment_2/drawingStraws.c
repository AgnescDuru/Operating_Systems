#include <stdio.h>#include <pthread.h>#include <stdlib.h>#include <stdint.h>#include <unistd.h>/*All	spawned	threads	should	be	executing	the	same function	drawNumber,	which	takes	as	argument	the	thread	number (NOT	the	thread-id).§ Each	thread	should	print its	corresponding	number and	a number randomly	selected	from	the	ones	in	theglobal	array numbers:v numbers = { 2,6,32,11,12,50,55,64,4,100}§ So	for	example,	the	Thread0	and	Thread1	 could print	the	following	messages:Thread 0: drew 55Thread 1: drew 32§ Insert	 the	 statement	 “usleep(rand()% 1000000);”	before each	 thread printf statement,	 to	make	threads	sleep	a	random	amount	of	time	(and	see	more	variation	in	the	output).*/int  numbers[]={2,6,32,11,12,50,55,64,4,100};int  ChosenThreads[20];int  ChosenNumbers[20];int iIndex = 0;int iThreadCount = 0;void *drawStraw(void *threadnumb){        long x = rand()%10;        usleep(rand()% 1000000);          while(numbers[x] ==0){         x = rand()%10;     }    uintptr_t nThreads = (uintptr_t)threadnumb;    printf("Thread %d: drew %d \n", nThreads, numbers[x]);       //Add the chosen numbers and threads to the arrays    ChosenThreads[iIndex] = nThreads;    ChosenNumbers[iIndex] = numbers[x];    iIndex++;    numbers[x] = 0;    return NULL;}//The thread with the smaller randomly picked number from the array numbers is the loser threadvoid * find_loser(void * param){    int iSmallest = ChosenNumbers[0];     int iSmallestIndex = 0;     int iLoserThread = 0;     for(int i =0; i<iThreadCount;i++){        if(ChosenNumbers[i] < iSmallest){            iSmallest = ChosenNumbers[i];            iSmallestIndex = i;        }            }            iLoserThread = ChosenThreads[iSmallestIndex];    printf("Loser: Thread %d drew the smallest straw! \n", iLoserThread);return NULL;}int main(int argc, char *argv[]){    //Error handling     //1 Command-line argument is provided / No command-line argument    if(argc != 2){        fprintf(stderr, "usage:./Nthreads <integer value>\n");        return -1;    }        //N option is in the valid range    if((atoi(argv[1]) <0)||(atoi(argv[1])==0) || (atoi(argv[1])>=10)){        fprintf(stderr, "Your seccond Argument must be in the following range from 1 to 9");        return -1;    }        int NUM_THREADS = atoi(argv[1]);    iThreadCount = atoi(argv[1]);    pthread_t threads[NUM_THREADS];    pthread_t Loserthread;    void *status;    srand(time(0));    for(int i =0; i<NUM_THREADS; i++){        pthread_create(&threads[i], NULL,drawStraw,(void *) i);        pthread_join(threads[i], &status);    }   //Another thread to return the loser executing the function find_loser    pthread_create(&Loserthread, NULL,find_loser, NULL);            pthread_join(Loserthread, NULL);          printf("All threads completed!\n");       pthread_exit(0);    return 0;}